<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ChenSoul Tech Notes</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/tech-notes/assets/style.BK6qhES8.css" as="style">
    <link rel="preload stylesheet" href="/tech-notes/vp-icons.css" as="style">
    
    <script type="module" src="/tech-notes/assets/app.oCqTSFrg.js"></script>
    <link rel="preload" href="/tech-notes/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/tech-notes/assets/chunks/theme.C6KBEyRr.js">
    <link rel="modulepreload" href="/tech-notes/assets/chunks/framework.gns6yynO.js">
    <link rel="modulepreload" href="/tech-notes/assets/architecture_index.md.CS6DcUlq.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/tech-notes/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>ChenSoul Tech Notes</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tech-notes/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="http://blog.chensoul.cc" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Blog</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/chensoul/tech-notes" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/chensoul/tech-notes" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Java</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tech-notes/java/index.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Intro</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tech-notes/java/ddd.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>DDD</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tech-notes/java/maven.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Maven</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tech-notes/java/github.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Github</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Architecture</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/tech-notes/architecture/index.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Intro</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _tech-notes_architecture_" data-v-39a288b8><div><h2 id="架构发展历程" tabindex="-1">架构发展历程 <a class="header-anchor" href="#架构发展历程" aria-label="Permalink to &quot;架构发展历程&quot;">​</a></h2><p>参考 <a href="https://www.jianshu.com/p/b477b2cc6cfa" target="_blank" rel="noreferrer">1.软件架构编年史(译)</a>，架构发展经历以下几个阶段：</p><ul><li><strong>过程式/函数式编程</strong></li><li><strong>MVC 模式(Model-View-Controller)</strong></li><li><strong>面向对象编程</strong></li><li><strong>CORBA</strong></li><li><strong>Message Bus</strong></li><li><strong>EBI 架构</strong>(Entity-Boundary-Interactor)</li><li><strong>面向方面编程</strong></li><li><strong>Web Services</strong></li><li><strong>ESB</strong></li><li><strong>DDD</strong></li><li><strong>MVVM 模式</strong></li><li><strong>端口和适配器架构</strong>，即六边形架构</li><li><strong>洋葱架构</strong></li><li><strong>微服务</strong></li><li><strong>DCI 架构</strong>(Data-Context-Interaction)</li><li><strong>整洁架构</strong></li><li><strong>C4 模型</strong></li></ul><h2 id="分层架构" tabindex="-1">分层架构 <a class="header-anchor" href="#分层架构" aria-label="Permalink to &quot;分层架构&quot;">​</a></h2><img src="https://upload-images.jianshu.io/upload_images/4099-86a57eb27ad63a8c.png" alt="img" style="zoom:50%;"><img src="https://upload-images.jianshu.io/upload_images/4099-3b29f804f28fadda.png" alt="img" style="zoom:50%;"><img src="https://upload-images.jianshu.io/upload_images/4099-adb2a8a51accd1aa.png" alt="img" style="zoom:50%;"><img src="https://upload-images.jianshu.io/upload_images/4099-737b9f8d0cdccee9.png" alt="img" style="zoom:50%;"><img src="https://www.happycoders.eu/wp-content/uploads/2023/06/hexagonal-architecture-java.v4-800x601.png" alt="Hexagonal architecture of the sample application" style="zoom:50%;"><img src="https://stibel.icu/_images/method/arch-principle/%E6%B4%8B%E8%91%B1%E6%9E%B6%E6%9E%84.png" alt="洋葱架构" style="zoom:50%;"><img src="https://blog.cleancoder.com/uncle-bob/images/2012-08-13-the-clean-architecture/CleanArchitecture.jpg" alt="img" style="zoom:50%;"><h2 id="单体架构和微服务" tabindex="-1">单体架构和微服务 <a class="header-anchor" href="#单体架构和微服务" aria-label="Permalink to &quot;单体架构和微服务&quot;">​</a></h2><blockquote><p><a href="https://www.youtube.com/watch?v=430YOyMNjhs&amp;t=565s" target="_blank" rel="noreferrer">https://www.youtube.com/watch?v=430YOyMNjhs&amp;t=565s</a></p></blockquote><img src="/tech-notes/assets/image-20241101074825888.i2_5Ueo7.png" alt="image-20241101074825888" style="zoom:50%;"><p>单体架构：应用打包多个边界上下文到一个部署单元。所有应用代码被部署并<em>运行在单一节点的单一进程中</em>。</p><ul><li>容易重构</li><li>容易测试整个系统</li><li>除非明确管理，否则可能会降级</li><li>更难测试单个限界上下文</li></ul><p>微服务：上下文的有界上下文定义了部署构件的边界。某些部分甚至被部署为单独的进程。</p><ul><li><p>有界上下文交互是远程的</p></li><li><p>测试单个模块</p></li><li><p>难以重构上下文边界</p></li><li><p>很难对整个系统进行测试</p></li></ul><h2 id="包和命名空间" tabindex="-1">包和命名空间 <a class="header-anchor" href="#包和命名空间" aria-label="Permalink to &quot;包和命名空间&quot;">​</a></h2><p><strong>包内聚原则</strong></p><ul><li><strong>REP</strong> – <a href="http://docs.google.com/a/cleancoder.com/viewer?a=v&amp;pid=explorer&amp;chrome=true&amp;srcid=0BwhCYaYDn8EgOGM2ZGFhNmYtNmE4ZS00OGY5LWFkZTYtMjE0ZGNjODQ0MjEx&amp;hl=en" target="_blank" rel="noreferrer">重用发布等价原则</a><em>重用的粒度等价于发布的粒度</em></li><li><strong>CCP</strong> – <a href="http://docs.google.com/a/cleancoder.com/viewer?a=v&amp;pid=explorer&amp;chrome=true&amp;srcid=0BwhCYaYDn8EgOGM2ZGFhNmYtNmE4ZS00OGY5LWFkZTYtMjE0ZGNjODQ0MjEx&amp;hl=en" target="_blank" rel="noreferrer">共同封闭原则</a><em>一起被修改的类应该放在一个包里</em></li><li><strong>CRP</strong> – <a href="http://docs.google.com/a/cleancoder.com/viewer?a=v&amp;pid=explorer&amp;chrome=true&amp;srcid=0BwhCYaYDn8EgOGM2ZGFhNmYtNmE4ZS00OGY5LWFkZTYtMjE0ZGNjODQ0MjEx&amp;hl=en" target="_blank" rel="noreferrer">共同重用原则</a><em>一起被重用的类应该放在一个包里</em></li></ul><p><strong>包耦合原则</strong></p><ul><li><strong>ADP</strong> – <a href="http://docs.google.com/a/cleancoder.com/viewer?a=v&amp;pid=explorer&amp;chrome=true&amp;srcid=0BwhCYaYDn8EgOGM2ZGFhNmYtNmE4ZS00OGY5LWFkZTYtMjE0ZGNjODQ0MjEx&amp;hl=en" target="_blank" rel="noreferrer">无环依赖原则</a><em>包的依赖图中不能出现循环</em></li><li><strong>SDP</strong> – <a href="http://docs.google.com/a/cleancoder.com/viewer?a=v&amp;pid=explorer&amp;chrome=true&amp;srcid=0BwhCYaYDn8EgZjI3OTU4ZTAtYmM4Mi00MWMyLTgxN2YtMzk5YTY1NTViNTBh&amp;hl=en" target="_blank" rel="noreferrer">稳定依赖原则</a><em>依赖应该朝着稳定的方向前进</em></li><li><strong>SAP</strong> – <a href="http://docs.google.com/a/cleancoder.com/viewer?a=v&amp;pid=explorer&amp;chrome=true&amp;srcid=0BwhCYaYDn8EgZjI3OTU4ZTAtYmM4Mi00MWMyLTgxN2YtMzk5YTY1NTViNTBh&amp;hl=en" target="_blank" rel="noreferrer">稳定抽象原则</a><em>抽象的级别越高，稳定性就越高</em></li></ul><p>包的分层：</p><ul><li>按照层打包</li><li>按照功能打包</li></ul><h2 id="spring-modulith" tabindex="-1">Spring Modulith <a class="header-anchor" href="#spring-modulith" aria-label="Permalink to &quot;Spring Modulith&quot;">​</a></h2><blockquote><p><a href="https://www.youtube.com/watch?v=hLa0SOVN6xQ&amp;t=138s" target="_blank" rel="noreferrer">https://www.youtube.com/watch?v=hLa0SOVN6xQ&amp;t=138s</a></p></blockquote><img src="/tech-notes/assets/image-20241101074124360.hh9s-_mj.png" alt="image-20241101074124360" style="zoom:50%;"><img src="/tech-notes/assets/image-20241101074146948.CVOOz3F2.png" alt="image-20241101074146948" style="zoom:50%;"><img src="/tech-notes/assets/image-20241101074212749.BhIPpjWf.png" alt="image-20241101074212749" style="zoom:50%;"><img src="/tech-notes/assets/image-20241101074303978.DgezTJMb.png" alt="image-20241101074303978" style="zoom:50%;"><img src="/tech-notes/assets/image-20241101074446536.BoVzx2aA.png" alt="image-20241101074446536" style="zoom:67%;"><img src="/tech-notes/assets/image-20241101074503154.CbRq7E2G.png" alt="image-20241101074503154" style="zoom:67%;"><img src="/tech-notes/assets/image-20241101074519368.DCFOkW7h.png" alt="image-20241101074519368" style="zoom:67%;"><img src="/tech-notes/assets/image-20241101074636550.BNAUk7Q-.png" alt="image-20241101074636550" style="zoom:67%;"><img src="/tech-notes/assets/image-20241101074704720.CwMZ1Dg7.png" alt="image-20241101074704720" style="zoom:50%;"><p>基础概念：</p><p>1、<strong>应用程序模块</strong></p><p>在 Spring Boot 应用程序中，应用程序模块是一个功能单元，是一个包，它由以下部分组成：</p><ul><li>向 Spring Bean 实例实现的其他模块和模块发布的应用程序事件公开的 API，通常称为<em>提供的接口</em>。</li><li>不应被其他模块访问的内部实现组件。</li><li>对其他模块以 Spring bean 依赖项、侦听的应用程序事件和公开的配置属性的形式公开的 API 的引用，通常称为<em>必需接口</em>。</li></ul><p>应用程序的<em>主包</em>是主应用程序类（@SpringBootApplicatio）所在的包，默认情况下，主包的每个直接子包都被视为<em>一个应用程序模块包</em>。</p><p>2、<strong>简单的应用程序模块</strong>：不包含任何子包，该包下可以有 public、private 的类。</p><p>3、<strong>高级应用程序模块</strong>：包含子包的应用程序模块。子包中的 internal 包为内部子包，其中的代码不得从其他模块引用。</p><p>4、<strong>嵌套应用程序模块</strong>：在高级应用模块的子包中可以包含子包，并在 package-info.java 中添加 @ApplicationModule 注解。</p><ul><li>嵌套模块中的代码可以被父包或者兄弟模块访问</li><li><em>嵌套</em>模块中的任何代码都可以访问父模块中的代码，甚至是内部代码</li><li>嵌套模块中的代码也可以访问顶级应用程序模块公开的类型</li></ul><p>5、<strong>开放应用模块</strong>：@ApplicationModule 标准的模块默认是封闭的，只能访问其他模块的公开类型。可以在该注解上添加 type = Type.OPEN 将其变为开放的。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">org.springframework.modulith.ApplicationModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Type.OPEN</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> example.inventory;</span></span></code></pre></div><p>6、<strong>显式应用程序模块依赖关系</strong>：模块可以选择使用<code>@ApplicationModule</code>软件包上的注释来声明其允许的依赖项</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">org.springframework.modulith.ApplicationModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  allowedDependencies</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;order&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> example.inventory;</span></span></code></pre></div><p>7、<strong>命名接口</strong>：可以给子包添加命名接口，让后允许其他模块访问</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">org.springframework.modulith.NamedInterface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;spi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> example.order.spi;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">org.springframework.modulith.ApplicationModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  allowedDependencies</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;order :: spi&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> example.inventory;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// or</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">org.springframework.modulith.ApplicationModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  allowedDependencies</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;order :: *&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> example.inventory;</span></span></code></pre></div><p><strong>自定义模块检测</strong>:</p><ul><li>在启动类上使用 @Modulithic 注解的 additionalPackages 属性，添加其他包作为根应用程序包</li><li>使用配置：<code>spring.modulith.detection-strategy=explicitly-annotated</code>，仅考虑使用了注解的包</li><li>使用自定义的策略：<code>spring.modulith.detection-strategy=example.CustomApplicationModuleDetectionStrategy</code></li><li>通过 spring.factories 文件：<code>org.springframework.modulith.core.ApplicationModuleSourceFactory=example.CustomApplicationModuleSourceFactory</code></li></ul><p>spring modulith 示例代码：</p><ul><li><a href="https://github.com/odrotbohm/arch-evident-spring" target="_blank" rel="noreferrer">https://github.com/odrotbohm/arch-evident-spring</a></li><li><a href="https://github.com/odrotbohm/spring-modulith-deep-dive/" target="_blank" rel="noreferrer">https://github.com/odrotbohm/spring-modulith-deep-dive/</a></li><li><a href="https://github.com/vicziani/jtechlog-spring-modulith" target="_blank" rel="noreferrer">https://github.com/vicziani/jtechlog-spring-modulith</a></li></ul><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><h3 id="software-architecture" tabindex="-1">Software Architecture <a class="header-anchor" href="#software-architecture" aria-label="Permalink to &quot;Software Architecture&quot;">​</a></h3><ul><li><a href="https://herbertograca.com/2017/07/03/the-software-architecture-chronicles/" target="_blank" rel="noreferrer">The Software Architecture Chronicles</a></li><li><a href="https://alistair.cockburn.us/hexagonal-architecture/" target="_blank" rel="noreferrer">Hexagonal architecture by Alistair Cockburn</a></li><li><a href="https://www.happycoders.eu/software-craftsmanship/hexagonal-architecture/" target="_blank" rel="noreferrer">Hexagonal Architecture - What Is It? Why Should You Use It?</a></li><li><a href="https://www.happycoders.eu/software-craftsmanship/hexagonal-architecture-spring-boot/" target="_blank" rel="noreferrer">Hexagonal Architecture with Spring Boot</a></li><li><a href="https://herbertograca.com/2017/08/03/layered-architecture/" target="_blank" rel="noreferrer">Layered Architecture</a></li><li><a href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html" target="_blank" rel="noreferrer">The Clean Architecture by Uncle Bob</a></li><li><a href="https://scalastic.io/en/hexagonal-architecture/" target="_blank" rel="noreferrer">Everything You Need to Know About Hexagonal Architecture: Kernel, Ports, Adapters</a></li><li><a href="https://www.amazon.in/Your-Hands-Dirty-Clean-Architecture/dp/180512837X/" target="_blank" rel="noreferrer">Get Your Hands Dirty on Clean Architecture</a></li><li><a href="https://victorrentea.ro/blog/overengineering-in-onion-hexagonal-architectures/" target="_blank" rel="noreferrer">Overengineering in Onion/Hexagonal Architectures</a></li><li><a href="https://www.vinsguru.com/cqrs-pattern/" target="_blank" rel="noreferrer">CQRS Pattern With Spring Boot</a></li><li><a href="https://www.youtube.com/watch?v=Lw04HRF8ies" target="_blank" rel="noreferrer">CQRS pitfalls and patterns</a></li><li><a href="https://www.youtube.com/watch?v=LDW0QWie21s" target="_blank" rel="noreferrer">Greg Young — A Decade of DDD, CQRS, Event Sourcing</a></li><li><a href="https://www.youtube.com/watch?v=5OjqD-ow8GE" target="_blank" rel="noreferrer">Modular Monoliths • Simon Brown</a></li><li><a href="https://www.youtube.com/watch?v=jzp0PGVegHA" target="_blank" rel="noreferrer">Five things every developer should know about software architecture by Simon Brown</a></li><li><a href="https://phauer.com/2020/package-by-feature/" target="_blank" rel="noreferrer">Package by Layer vs Feature</a></li></ul><h3 id="domain-driven-design" tabindex="-1">Domain Driven Design <a class="header-anchor" href="#domain-driven-design" aria-label="Permalink to &quot;Domain Driven Design&quot;">​</a></h3><ul><li><a href="https://www.amazon.in/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215" target="_blank" rel="noreferrer">Domain-Driven Design: Tackling Complexity in the Heart of Software</a></li><li><a href="https://www.amazon.in/Implementing-Domain-Driven-Design-Vaughn-Vernon/dp/0321834577" target="_blank" rel="noreferrer">Implementing Domain-Driven Design</a></li><li><a href="https://medium.com/ssense-tech/domain-driven-design-everything-you-always-wanted-to-know-about-it-but-were-afraid-to-ask-a85e7b74497a" target="_blank" rel="noreferrer">Domain-Driven Design: Everything You Always Wanted to Know About it, But Were Afraid to Ask</a></li><li><a href="https://vaadin.com/blog/ddd-part-1-strategic-domain-driven-design" target="_blank" rel="noreferrer">DDD Part 1: Strategic Domain-Driven Design</a></li><li><a href="https://github.com/ddd-crew" target="_blank" rel="noreferrer">Domain-Driven Design Crew</a></li></ul><h3 id="documenting-architecture" tabindex="-1">Documenting Architecture <a class="header-anchor" href="#documenting-architecture" aria-label="Permalink to &quot;Documenting Architecture&quot;">​</a></h3><ul><li><a href="https://adr.github.io/" target="_blank" rel="noreferrer">Architectural Decision Records (ADRs)</a></li><li><a href="https://c4model.com/" target="_blank" rel="noreferrer">The C4 model for visualising software architecture</a></li></ul><h3 id="enforcing-coding-architecture-guidelines" tabindex="-1">Enforcing Coding &amp; Architecture Guidelines <a class="header-anchor" href="#enforcing-coding-architecture-guidelines" aria-label="Permalink to &quot;Enforcing Coding &amp; Architecture Guidelines&quot;">​</a></h3><ul><li>Coding Standards and Bug Pattern Detectors <ul><li><a href="https://checkstyle.sourceforge.io/" target="_blank" rel="noreferrer">CheckStyle</a></li><li><a href="https://pmd.github.io/" target="_blank" rel="noreferrer">PMD</a>, <a href="https://spotbugs.github.io/" target="_blank" rel="noreferrer">SpotBugs</a></li><li><a href="https://github.com/google/error-prone" target="_blank" rel="noreferrer">ErrorProne</a></li><li><a href="https://www.sonarsource.com/products/sonarqube/" target="_blank" rel="noreferrer">SonarQube</a></li></ul></li><li><a href="https://www.archunit.org/" target="_blank" rel="noreferrer">ArchUnit</a> - Enforce architecture guidelines as tests</li><li><a href="https://spring.io/projects/spring-modulith" target="_blank" rel="noreferrer">Spring Modulith</a> - Enforce modularity in Modular Monoliths</li></ul><h3 id="reference-implementations" tabindex="-1">Reference Implementations <a class="header-anchor" href="#reference-implementations" aria-label="Permalink to &quot;Reference Implementations&quot;">​</a></h3><ul><li><a href="https://github.com/hirannor/springboot-hexagonal-ddd" target="_blank" rel="noreferrer">Spring-Boot application based on hexagonal architecture and DDD</a></li><li><a href="https://github.com/jesperancinha/favourite-lyrics-app" target="_blank" rel="noreferrer">Hexagonal Architecture (Kotlin)</a></li><li><a href="https://github.com/anton-liauchuk/educational-platform" target="_blank" rel="noreferrer">Modular Monolith Java application with DDD</a></li><li><a href="https://github.com/sivaprasadreddy/spring-realworld-conduit-api" target="_blank" rel="noreferrer">Spring RealWorld Conduit API</a></li><li><a href="https://github.com/rkudryashov/event-driven-architecture" target="_blank" rel="noreferrer">Event-driven architecture (Transactional outbox, Inbox, and Saga patterns)</a></li><li><a href="https://github.com/naspredam/rest-spring-boot-hexagonal-architecture" target="_blank" rel="noreferrer">Spring Boot Hexagonal Architecture</a></li><li><a href="https://github.com/spember/spring-shoestore" target="_blank" rel="noreferrer">Clean Architecture in Spring</a></li><li><a href="https://github.com/xsreality/spring-modulith-with-ddd" target="_blank" rel="noreferrer">Modular Monolith Applications with Spring Modulith and Domain Driven Design</a></li><li><a href="https://github.com/asc-lab/java-cqrs-intro" target="_blank" rel="noreferrer">CQRS with Event Sourcing</a></li><li><a href="https://github.com/sivaprasadreddy/spring-boot-microservices-course" target="_blank" rel="noreferrer">Spring Boot Microservices Application</a></li><li><a href="https://github.com/sivaprasadreddy/sivalabs-youtube-code-samples/tree/main/spring-boot-modulith-demo" target="_blank" rel="noreferrer">Spring Boot using Spring Modulith</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/tech-notes/java/github.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>Github</span><!--]--></a></div><div class="pager" data-v-e257564d><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"architecture_aoe-radar.md\":\"CL-CQ7u2\",\"architecture_ddd分层架构实践指南_01-概述.md\":\"B78JPuSZ\",\"architecture_ddd分层架构实践指南_02-架构设计.md\":\"Cq4o6PH0\",\"architecture_ddd分层架构实践指南_03-领域建模.md\":\"DIhMDVD4\",\"architecture_ddd分层架构实践指南_04-应用服务.md\":\"CMWht6Kj\",\"architecture_ddd分层架构实践指南_05-接口访问.md\":\"CmY5ISB4\",\"architecture_ddd分层架构实践指南_06-基础设施.md\":\"CJZaZFZQ\",\"architecture_ddd分层架构实践指南_14-质量保证.md\":\"qUl8b7wi\",\"architecture_ddd分层架构实践指南_15-示例项目.md\":\"IaXHEYb4\",\"architecture_index.md\":\"CS6DcUlq\",\"index.md\":\"DtM6Ggfq\",\"java_ddd.md\":\"DuhcjXZZ\",\"java_github.md\":\"C2rcFFt2\",\"java_index.md\":\"p9x9BjCz\",\"java_maven.md\":\"C0__rATU\",\"spring-boot_spring-boot-htmx.md\":\"mr-gO3ZP\",\"spring-boot_spring-boot-testing.md\":\"Bp4xuqa7\",\"spring-boot_spring-oauth2.md\":\"Cl2fYqgq\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"ChenSoul Tech Notes\",\"description\":\"A VitePress site\",\"base\":\"/tech-notes/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Blog\",\"link\":\"http://blog.chensoul.cc\"}],\"sidebar\":[{\"text\":\"Java\",\"collapsed\":false,\"items\":[{\"text\":\"Intro\",\"link\":\"/java/index.md\"},{\"text\":\"DDD\",\"link\":\"/java/ddd.md\"},{\"text\":\"Maven\",\"link\":\"/java/maven.md\"},{\"text\":\"Github\",\"link\":\"/java/github.md\"}]},{\"text\":\"Architecture\",\"collapsed\":false,\"items\":[{\"text\":\"Intro\",\"link\":\"/architecture/index.md\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/chensoul/tech-notes\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>