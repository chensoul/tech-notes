秒杀系统特点：

- 瞬时并发量大
- 库存少



解决方案：

- 访问层：
  - 页面静态化
  - CDN缓存
  - 秒杀按钮：
    - 活动前禁用按钮，点击后禁用按钮：使用 Nginx + lua 实现定时器
    - 滑动验证码：使用 nginx + lua 实现
    - 排队体验
- 负载均衡：使用三级负载均衡：
  - 硬件负载均衡
  - Nginx 负载均衡
    - 一致性哈希算法，按照商品 ID 哈希
    - Nginx 本地限流
    - 验证码：nginx + lua 实现
  - 服务网关
    - 限流：基于 IP、用户、请求限流
    - 限流熔断，比如使用 Sentinel
- 服务端：
  - 预热：使用 Redis 缓存
  - 库存问题：redis + lua 或者分布式锁
  - 防重：token 防重
  - 动态扩容
  - 异步下单
    - MQ 按地域分组
- 数据库：
  - 限流：存储过程中使用随机算法
  - 读写分离
  - 分库分表























