import{_ as i,o as a,c as n,ae as t}from"./chunks/framework.gns6yynO.js";const g=JSON.parse('{"title":"5. 接口访问层设计与实现","description":"","frontmatter":{},"headers":[],"relativePath":"architecture/DDD分层架构实践指南/05-接口访问.md","filePath":"architecture/DDD分层架构实践指南/05-接口访问.md"}'),l={name:"architecture/DDD分层架构实践指南/05-接口访问.md"};function h(p,s,k,e,r,E){return a(),n("div",null,[...s[0]||(s[0]=[t(`<h1 id="_5-接口访问层设计与实现" tabindex="-1">5. 接口访问层设计与实现 <a class="header-anchor" href="#_5-接口访问层设计与实现" aria-label="Permalink to &quot;5. 接口访问层设计与实现&quot;">​</a></h1><h2 id="_5-1-接口层概述" tabindex="-1">5.1 接口层概述 <a class="header-anchor" href="#_5-1-接口层概述" aria-label="Permalink to &quot;5.1 接口层概述&quot;">​</a></h2><p>接口访问层是领域驱动设计（DDD）分层架构中最外层的部分，负责处理来自外部的请求，并将其转发给应用层进行处理。接口层是系统与外部世界交互的边界，包括用户界面、API接口、消息队列等多种形式。</p><h3 id="_5-1-1-接口层的定位" tabindex="-1">5.1.1 接口层的定位 <a class="header-anchor" href="#_5-1-1-接口层的定位" aria-label="Permalink to &quot;5.1.1 接口层的定位&quot;">​</a></h3><p>在DDD分层架构中，接口层的定位如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>接口层 → 应用层 → 领域层 → 基础设施层</span></span></code></pre></div><ul><li><strong>接口层</strong>：负责处理外部请求，转发给应用层</li><li><strong>应用层</strong>：协调和编排领域对象，处理用例流程</li><li><strong>领域层</strong>：包含业务逻辑和规则，是系统的核心</li><li><strong>基础设施层</strong>：提供技术支持，如持久化、消息传递等</li></ul><h3 id="_5-1-2-接口层的职责边界" tabindex="-1">5.1.2 接口层的职责边界 <a class="header-anchor" href="#_5-1-2-接口层的职责边界" aria-label="Permalink to &quot;5.1.2 接口层的职责边界&quot;">​</a></h3><p>接口层的主要职责是：</p><ol><li><strong>请求接收</strong>：接收来自外部的请求</li><li><strong>参数解析</strong>：解析请求参数</li><li><strong>参数验证</strong>：验证请求参数的合法性</li><li><strong>权限检查</strong>：检查请求者的权限</li><li><strong>请求转发</strong>：将请求转发给应用层</li><li><strong>结果封装</strong>：将应用层的处理结果封装为响应</li><li><strong>异常处理</strong>：处理请求过程中的异常</li></ol><p>接口层不应该包含：</p><ol><li><strong>业务逻辑</strong>：业务逻辑应该在领域层中实现</li><li><strong>用例编排</strong>：用例编排应该在应用层中实现</li><li><strong>持久化逻辑</strong>：持久化应该由基础设施层处理</li></ol><h2 id="_5-2-接口层核心职责" tabindex="-1">5.2 接口层核心职责 <a class="header-anchor" href="#_5-2-接口层核心职责" aria-label="Permalink to &quot;5.2 接口层核心职责&quot;">​</a></h2><h3 id="_5-2-1-请求接收与参数解析" tabindex="-1">5.2.1 请求接收与参数解析 <a class="header-anchor" href="#_5-2-1-请求接收与参数解析" aria-label="Permalink to &quot;5.2.1 请求接收与参数解析&quot;">​</a></h3><p>接口层负责接收来自外部的请求，并解析请求参数。在Spring MVC中，通常使用<code>@RequestMapping</code>、<code>@GetMapping</code>、<code>@PostMapping</code>等注解来定义请求处理方法。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RestController</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/api/users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PostMapping</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UserResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CreateUserRequest </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 处理创建用户请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/{userId}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">UserResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PathVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 处理获取用户请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_5-2-2-参数验证" tabindex="-1">5.2.2 参数验证 <a class="header-anchor" href="#_5-2-2-参数验证" aria-label="Permalink to &quot;5.2.2 参数验证&quot;">​</a></h3><p>接口层负责验证请求参数的合法性，确保参数符合业务规则。在Spring MVC中，通常使用Bean Validation来验证请求参数。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PostMapping</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UserResponse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Valid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CreateUserRequest request) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 处理创建用户请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>请求对象中定义验证规则：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CreateUserRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NotBlank</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;用户名不能为空&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">min</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">max</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;用户名长度必须在4-20之间&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String username;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NotBlank</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;邮箱不能为空&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;邮箱格式不正确&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String email;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">NotBlank</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;密码不能为空&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">min</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">max</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;密码长度必须在6-20之间&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String password;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // getter 和 setter 方法...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_5-2-3-权限检查" tabindex="-1">5.2.3 权限检查 <a class="header-anchor" href="#_5-2-3-权限检查" aria-label="Permalink to &quot;5.2.3 权限检查&quot;">​</a></h3><p>接口层负责检查请求者的权限，确保请求者有权限执行请求的操作。在Spring Security中，通常使用<code>@PreAuthorize</code>注解来定义权限检查规则。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/{userId}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PreAuthorize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hasRole(&#39;ADMIN&#39;) or #userId == authentication.principal.id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UserResponse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PathVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String userId) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 处理获取用户请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_5-2-4-请求转发" tabindex="-1">5.2.4 请求转发 <a class="header-anchor" href="#_5-2-4-请求转发" aria-label="Permalink to &quot;5.2.4 请求转发&quot;">​</a></h3><p>接口层负责将请求转发给应用层，调用应用服务的方法处理请求。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PostMapping</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UserResponse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Valid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestBody</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CreateUserRequest request) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 将请求参数转换为命令对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    CreateUserCommand command </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requestMapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toCommand</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(request);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 调用应用服务处理请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    String userId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userApplicationService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(command);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 返回处理结果</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">created</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(URI.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/api/users/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userId))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_5-2-5-结果封装" tabindex="-1">5.2.5 结果封装 <a class="header-anchor" href="#_5-2-5-结果封装" aria-label="Permalink to &quot;5.2.5 结果封装&quot;">​</a></h3><p>接口层负责将应用层的处理结果封装为响应，返回给请求者。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GetMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/{userId}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">UserResponse</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PathVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String userId) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 调用应用服务获取用户信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    UserDTO userDTO </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userApplicationService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 将DTO转换为响应对象</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    UserResponse response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> responseMapper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userDTO);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 返回响应</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ok</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_5-2-6-异常处理" tabindex="-1">5.2.6 异常处理 <a class="header-anchor" href="#_5-2-6-异常处理" aria-label="Permalink to &quot;5.2.6 异常处理&quot;">​</a></h3><p>接口层负责处理请求过程中的异常，将异常转换为合适的HTTP响应。在Spring MVC中，通常使用<code>@ExceptionHandler</code>注解来定义异常处理方法。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RestControllerAdvice</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GlobalExceptionHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ExceptionHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(EntityNotFoundException.class)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ErrorResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleEntityNotFoundException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(EntityNotFoundException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ErrorResponse response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ErrorResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getErrorCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpStatus.NOT_FOUND).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ExceptionHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(BusinessException.class)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ErrorResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleBusinessException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(BusinessException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ErrorResponse response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ErrorResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getErrorCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpStatus.BAD_REQUEST).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ExceptionHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MethodArgumentNotValidException.class)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ErrorResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleValidationException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MethodArgumentNotValidException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; errors </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBindingResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFieldErrors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getField</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDefaultMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Collectors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ErrorResponse response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ErrorResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;VALIDATION_ERROR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;参数验证失败&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, errors);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ResponseEntity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpStatus.BAD_REQUEST).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_5-3-接口层设计原则" tabindex="-1">5.3 接口层设计原则 <a class="header-anchor" href="#_5-3-接口层设计原则" aria-label="Permalink to &quot;5.3 接口层设计原则&quot;">​</a></h2><h3 id="_5-3-1-关注点分离原则" tabindex="-1">5.3.1 关注点分离原则 <a class="header-anchor" href="#_5-3-1-关注点分离原则" aria-label="Permalink to &quot;5.3.1 关注点分离原则&quot;">​</a></h3><p>接口层应该只关注接口相关的逻辑，不应该包含业务逻辑。业务逻辑应该由应用层和领域层处理。</p><h3 id="_5-3-2-接口一致性原则" tabindex="-1">5.3.2 接口一致性原则 <a class="header-anchor" href="#_5-3-2-接口一致性原则" aria-label="Permalink to &quot;5.3.2 接口一致性原则&quot;">​</a></h3><p>接口设计应该保持一致性，包括URL命名、请求方法、请求参数、响应格式等。</p><h3 id="_5-3-3-版本控制原则" tabindex="-1">5.3.3 版本控制原则 <a class="header-anchor" href="#_5-3-3-版本控制原则" aria-label="Permalink to &quot;5.3.3 版本控制原则&quot;">​</a></h3><p>接口应该支持版本控制，以便在接口变更时保持向后兼容性。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RestController</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/api/v1/users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserControllerV1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // V1版本的接口实现</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RestController</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RequestMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/api/v2/users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserControllerV2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // V2版本的接口实现</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_5-3-4-安全性原则" tabindex="-1">5.3.4 安全性原则 <a class="header-anchor" href="#_5-3-4-安全性原则" aria-label="Permalink to &quot;5.3.4 安全性原则&quot;">​</a></h3><p>接口设计应该考虑安全性，包括认证、授权、数据加密等。</p><h3 id="_5-3-5-可测试性原则" tabindex="-1">5.3.5 可测试性原则 <a class="header-anchor" href="#_5-3-5-可测试性原则" aria-label="Permalink to &quot;5.3.5 可测试性原则&quot;">​</a></h3><p>接口设计应该考虑可测试性，便于进行单元测试和集成测试。</p><h2 id="_5-4-rest-api设计" tabindex="-1">5.4 REST API设计 <a class="header-anchor" href="#_5-4-rest-api设计" aria-label="Permalink to &quot;5.4 REST API设计&quot;">​</a></h2><h3 id="_5-4-1-资源命名" tabindex="-1">5.4.1 资源命名 <a class="header-anchor" href="#_5-4-1-资源命名" aria-label="Permalink to &quot;5.4.1 资源命名&quot;">​</a></h3><p>资源应该使用名词复数形式，例如<code>/users</code>、<code>/orders</code>。</p><h3 id="_5-4-2-http方法" tabindex="-1">5.4.2 HTTP方法 <a class="header-anchor" href="#_5-4-2-http方法" aria-label="Permalink to &quot;5.4.2 HTTP方法&quot;">​</a></h3><p>使用HTTP方法表示对资源的操作：</p><ul><li><strong>GET</strong>：获取资源</li><li><strong>POST</strong>：创建资源</li><li><strong>PUT</strong>：更新资源（全量更新）</li><li><strong>PATCH</strong>：更新资源（部分更新）</li><li><strong>DELETE</strong>：删除资源</li></ul><h3 id="_5-4-3-url设计" tabindex="-1">5.4.3 URL设计 <a class="header-anchor" href="#_5-4-3-url设计" aria-label="Permalink to &quot;5.4.3 URL设计&quot;">​</a></h3><ul><li><strong>获取资源列表</strong>：GET /resources</li><li id=""><strong>获取单个资源</strong>：GET /resources/</li><li><strong>创建资源</strong>：POST /resources</li><li id=""><strong>更新资源</strong>：PUT /resources/{id} 或 PATCH /resources/</li><li id=""><strong>删除资源</strong>：DELETE /resources/</li><li><strong>获取子资源</strong>：GET /resources/{id}/sub-resources</li><li><strong>创建子资源</strong>：POST /resources/{id}/sub-resources</li></ul><h3 id="_5-4-4-查询参数" tabindex="-1">5.4.4 查询参数 <a class="header-anchor" href="#_5-4-4-查询参数" aria-label="Permalink to &quot;5.4.4 查询参数&quot;">​</a></h3><p>使用查询参数进行过滤、排序、分页等操作：</p><ul><li><strong>过滤</strong>：/users?status=active</li><li><strong>排序</strong>：/users?sort=username,asc</li><li><strong>分页</strong>：/users?page=1&amp;size=10</li></ul><h3 id="_5-4-5-状态码" tabindex="-1">5.4.5 状态码 <a class="header-anchor" href="#_5-4-5-状态码" aria-label="Permalink to &quot;5.4.5 状态码&quot;">​</a></h3><p>使用合适的HTTP状态码表示请求处理结果：</p><ul><li><strong>200 OK</strong>：请求成功</li><li><strong>201 Created</strong>：资源创建成功</li><li><strong>204 No Content</strong>：请求成功，但没有返回内容</li><li><strong>400 Bad Request</strong>：请求参数错误</li><li><strong>401 Unauthorized</strong>：未认证</li><li><strong>403 Forbidden</strong>：没有权限</li><li><strong>404 Not Found</strong>：资源不存在</li><li><strong>409 Conflict</strong>：资源冲突</li><li><strong>500 Internal Server Error</strong>：服务器内部错误</li></ul><h2 id="_5-11-最佳实践" tabindex="-1">5.11 最佳实践 <a class="header-anchor" href="#_5-11-最佳实践" aria-label="Permalink to &quot;5.11 最佳实践&quot;">​</a></h2><h3 id="_5-11-1-接口设计最佳实践" tabindex="-1">5.11.1 接口设计最佳实践 <a class="header-anchor" href="#_5-11-1-接口设计最佳实践" aria-label="Permalink to &quot;5.11.1 接口设计最佳实践&quot;">​</a></h3><ol><li><strong>使用RESTful风格</strong>：遵循REST原则设计API</li><li><strong>版本控制</strong>：在URL中包含版本号，例如<code>/api/v1/users</code></li><li><strong>使用HTTP方法</strong>：使用GET、POST、PUT、PATCH、DELETE表示操作</li><li><strong>使用HTTP状态码</strong>：使用合适的HTTP状态码表示请求处理结果</li><li><strong>使用查询参数</strong>：使用查询参数进行过滤、排序、分页等操作</li><li><strong>使用统一的响应格式</strong>：使用统一的响应格式，包括成功响应和错误响应</li><li><strong>使用JSON格式</strong>：使用JSON作为请求和响应的数据格式</li><li><strong>使用驼峰命名</strong>：使用驼峰命名法命名JSON字段</li><li><strong>使用复数名词</strong>：使用复数名词命名资源，例如<code>/users</code>而不是<code>/user</code></li><li><strong>使用嵌套资源</strong>：使用嵌套资源表示资源之间的关系，例如<code>/users/{id}/orders</code></li></ol><h3 id="_5-11-2-安全最佳实践" tabindex="-1">5.11.2 安全最佳实践 <a class="header-anchor" href="#_5-11-2-安全最佳实践" aria-label="Permalink to &quot;5.11.2 安全最佳实践&quot;">​</a></h3><ol><li><strong>使用HTTPS</strong>：使用HTTPS加密传输数据</li><li><strong>使用JWT</strong>：使用JWT进行认证和授权</li><li><strong>使用密码加密</strong>：使用BCrypt等算法加密密码</li><li><strong>使用CSRF保护</strong>：使用CSRF令牌防止跨站请求伪造</li><li><strong>使用XSS保护</strong>：使用XSS过滤器防止跨站脚本攻击</li><li><strong>使用CORS</strong>：使用CORS控制跨域访问</li><li><strong>使用速率限制</strong>：使用速率限制防止暴力攻击</li><li><strong>使用输入验证</strong>：验证所有输入参数，防止注入攻击</li><li><strong>使用最小权限原则</strong>：只授予必要的权限</li><li><strong>使用安全头</strong>：使用安全头防止点击劫持等攻击</li></ol><h3 id="_5-11-3-性能最佳实践" tabindex="-1">5.11.3 性能最佳实践 <a class="header-anchor" href="#_5-11-3-性能最佳实践" aria-label="Permalink to &quot;5.11.3 性能最佳实践&quot;">​</a></h3><ol><li><strong>使用缓存</strong>：使用缓存减少数据库访问</li><li><strong>使用分页</strong>：使用分页减少数据传输量</li><li><strong>使用压缩</strong>：使用GZIP等压缩算法减少数据传输量</li><li><strong>使用异步处理</strong>：使用异步处理提高响应速度</li><li><strong>使用连接池</strong>：使用连接池减少连接创建开销</li><li><strong>使用索引</strong>：使用索引提高查询性能</li><li><strong>使用批处理</strong>：使用批处理减少数据库访问次数</li><li><strong>使用延迟加载</strong>：使用延迟加载减少不必要的数据加载</li><li><strong>使用CDN</strong>：使用CDN加速静态资源访问</li><li><strong>使用负载均衡</strong>：使用负载均衡分散请求压力</li></ol><h2 id="_5-12-总结" tabindex="-1">5.12 总结 <a class="header-anchor" href="#_5-12-总结" aria-label="Permalink to &quot;5.12 总结&quot;">​</a></h2><p>接口层是系统与外部世界交互的边界，负责处理来自外部的请求，并将其转发给应用层进行处理。接口层的设计应该遵循关注点分离、接口一致性、版本控制等原则，保持接口层轻量级，将业务逻辑委派给应用层处理。</p><p>接口层的核心组件包括控制器、请求/响应对象、请求/响应映射器、异常处理器等。控制器接收请求并调用应用服务，请求/响应对象封装请求和响应数据，请求/响应映射器在请求/响应对象和命令/DTO对象之间进行转换，异常处理器处理请求过程中的异常。</p><p>通过合理设计接口层，可以实现系统与外部世界的解耦，提高系统的可维护性和可扩展性。</p>`,70)])])}const o=i(l,[["render",h]]);export{g as __pageData,o as default};
